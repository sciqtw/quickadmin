{"version":3,"sources":["webpack:///./src/views/resource-page.vue?1422","webpack:///./src/views/resource-page.vue","webpack:///./src/views/resource-page.vue?964d"],"names":["routeInfo","useStore","useRoute","formFields","useRouter","ref","key","resolveModeluName","computed","props","moduleName","resourceRequestQueryString","Object","assign","query","requestUrl","url","value","resourceName","actionName","func","refreshPage","repage","refresh","getInitData","Quick","api","loading","target","background","request","get","params","then","data","closeLoading","catch","error","console","log","finally","watch","onMounted","$on","__exports__"],"mappings":"yIAAA,W,4UCoBQA,GADQC,iBACIC,kBA0BZC,GAzBSC,iBAyBIC,iBAAI,KAGjBC,GAFOD,kBAAI,GACEA,iBAAI,IACXA,iBAAI,IAEVE,EAAoBC,uBAAS,WACjC,OAAOC,EAAMC,cAITC,EAA6BH,uBAAS,WAC1C,OAAOI,OAAOC,OAAO,GAAIb,EAAUc,UAG/BC,EAAaP,uBAAS,WAC1B,IAAIQ,EAAM,GAAH,OAAMT,EAAkBU,MAAxB,qBAA0CR,EAAMS,aAAhD,YAAgET,EAAMU,YAI7E,OAHIV,EAAMW,OACRJ,GAAO,IAAMP,EAAMW,MAEdJ,KAGHK,EAAcb,uBAAS,WAC3B,OAAOR,EAAUc,MAAMQ,QAAU,MAI7BC,EAAU,aAMVC,EAAc,WAClBC,MAAMC,IAAIC,QAAQ,CAChBC,OAAO,iBACPC,WAAY,uBAEdJ,MAAMK,UAAUC,IAAIhB,EAAWE,MAC7B,CACEe,OAAQrB,EAA2BM,QAErCgB,MAAK,SAACC,GAGN/B,EAAWc,MAAQiB,EAAKA,KAExBT,MAAMC,IAAIS,kBACTC,OAAM,SAACC,GACRC,QAAQC,IAAI,QAASF,MACpBG,SAAQ,WACTf,MAAMC,IAAIS,mB,OAIdM,oBACE,kBAAMpB,EAAYJ,MAAQF,EAAWE,SACrC,WACAO,OAEFkB,wBAAU,WACRjB,MAAMkB,IAAI,WAAU,WAClBnB,OAEFA,O,mbCxGJ,MAAMoB,EAA2B,IAAgB,EAAQ,CAAC,CAAC,YAAY,qBAExD","file":"js/chunk-1a06b3ab.64e35d44.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./resource-page.vue?vue&type=style&index=0&id=ba30ba64&scoped=true&lang=scss\"","<template>\n  <div id=\"qk_resource\">\n    <json-render\n      :render-data=\"formFields\"\n      :module-name=\"moduleName\"\n      :resource=\"resourceName\"\n      :key=\"key\"\n      @refresh=\"refresh\"\n      v-if=\"formFields.component\"/>\n  </div>\n\n</template>\n\n<script setup>\n  import {computed, ref, onMounted, defineProps, watch} from 'vue';\n\n  import {useStore} from 'vuex';\n  import {useRoute, useRouter} from 'vue-router';\n\n  const store = useStore();\n  const routeInfo = useRoute();\n  const router = useRouter();\n\n  const props = defineProps({\n    // 模块\n    moduleName: {\n      type: String,\n      default: ''\n    },\n    // 资源\n    resourceName: {\n      type: String,\n      default: 'index'\n    },\n    // 方法\n    actionName: {\n      type: String,\n      default: 'index'\n    },\n    func: {\n      type: String,\n      default: ''\n    }\n  })\n\n\n  const formFields = ref({});\n  const show = ref(false);\n  const components = ref({});\n  const key = ref(1);\n\n  const resolveModeluName = computed(() => {\n    return props.moduleName\n  })\n\n\n  const resourceRequestQueryString = computed(() => {\n    return Object.assign({}, routeInfo.query)\n  })\n\n  const requestUrl = computed(() => {\n    let url = `${resolveModeluName.value}/resource/${props.resourceName}/${props.actionName}`\n    if (props.func) {\n      url += '/' + props.func\n    }\n    return url\n  })\n\n  const refreshPage = computed(() => {\n    return routeInfo.query.repage || ''\n  })\n\n\n  const refresh = function () {\n    getInitData\n  }\n  /**\n   * 获取数据\n   */\n  const getInitData = function () {\n    Quick.api.loading({\n      target:'.loading_class',\n      background: 'rgba(0, 0, 0, 0.1)'\n    })\n    Quick.request().get(requestUrl.value,\n      {\n        params: resourceRequestQueryString.value\n      }\n    ).then((data) => {\n\n\n      formFields.value = data.data\n      // key.value++\n      Quick.api.closeLoading()\n    }).catch((error) => {\n      console.log('error', error)\n    }).finally(() => {\n      Quick.api.closeLoading()\n    })\n  }\n\n  watch(\n    () => refreshPage.value + requestUrl.value,\n    () => {\n    getInitData()\n  })\n  onMounted(() => {\n    Quick.$on('refresh',() => {\n      getInitData()\n    })\n    getInitData()\n\n  })\n\n\n</script>\n\n<style scoped lang=\"scss\">\n  .box {\n    /*background-color: #FFFFFF;*/\n    margin: 15px;\n    padding: 15px;\n  }\n\n  .skeleton-box {\n    margin-top: 30px;\n\n    .skeleton-box-item {\n      padding: 30px;\n      border-radius: 8px;\n      background-color: #FFFFFF;\n    }\n  }\n</style>\n","import script from \"./resource-page.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./resource-page.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./resource-page.vue?vue&type=style&index=0&id=ba30ba64&scoped=true&lang=scss\"\n\nimport exportComponent from \"D:\\\\project\\\\php\\\\test_quick_admin\\\\php\\\\vue3\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ba30ba64\"]])\n\nexport default __exports__"],"sourceRoot":""}